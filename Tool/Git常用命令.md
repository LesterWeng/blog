# Git å¸¸ç”¨å‘½ä»¤

## global ç›¸å…³

- ç”Ÿæˆ SSH å…¬é’¥ï¼š `ssh-keygen`

- æœ¬åœ°åº“åˆå§‹åŒ–: `git init`

- ä¿®æ”¹ Git é…ç½®ï¼š `git config [options]`

  å¯æ·»åŠ èŒƒå›´é€‰é¡¹æ¥æ›´æ”¹é…ç½®çš„èŒƒå›´:

  - --system
  - --global
  - --local

  å¯æŸ¥çœ‹ï¼ˆè¯»ï¼‰ï¼Œå¯è®¾ç½®ï¼ˆå†™ï¼‰ï¼š

  - git config user.name (read)
  - git config user.name "your user name" (write)
  - git config --global http.sslVerify false (å¿½ç•¥ https éªŒè¯)

- æŸ¥çœ‹ git config çš„ HOME è·¯å¾„ï¼š`echo $HOME`

- é…ç½® git config çš„ HOME è·¯å¾„ï¼š`export $HOME=/c/gitconfig`

- æŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„æ¯ä¸€è¡Œçš„ä¿®æ”¹è®°å½•ï¼ˆè°åœ¨ä»€ä¹ˆæ—¶å€™ä¿®æ”¹çš„ï¼‰ï¼š`git blame 'someFile'`

## branch ç›¸å…³

- å…‹éš†åˆ†æ”¯ï¼š `git clone xxx`

- æŸ¥çœ‹è¿œç¨‹/å…¨éƒ¨åˆ†æ”¯ï¼š `git branch -r/-a`

- åˆ›å»ºæ–°åˆ†æ”¯: `git branch 'newBranch'`

- åˆ›å»ºå¹¶åˆ‡æ¢è‡³æ–°åˆ†æ”¯ï¼š `git checkout -b 'newBranch'`

- å°†æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯è¿›è¡Œå…³è”ï¼Œè®¾ç½®å`git pull`å’Œ`git push`ç®€å†™ä¼šç›´æ¥æ‹‰å–/æ¨é€åˆ°å…³è”çš„è¿œç¨‹åˆ†æ”¯ï¼š `git branch --set-upstream-to=origin/newBranch`

- åˆ é™¤åˆ†æ”¯ï¼š `git checkout -d 'oldBranch'`

- åˆ‡æ¢åˆ†æ”¯ï¼š `git checkout xxx`

- æŸ¥çœ‹å½“å‰åˆ†æ”¯æœ‰å“ªäº›ä¿®æ”¹ï¼š`git status`

- æŸ¥çœ‹å½“å‰åˆ†æ”¯ä¸Šçš„æ—¥å¿—ä¿¡æ¯ï¼š`git log`

## æ‹‰å–ç›¸å…³

- æ›´æ–°æœ¬åœ°çš„è¿œç¨‹åˆ†æ”¯ï¼š`git fetch`

- åˆå¹¶ xxx åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼š `git merge xxx`

- æ›´æ–°æœ¬åœ°çš„è¿œç¨‹åˆ†æ”¯å¹¶åˆå¹¶åˆ°æœ¬åœ°åˆ†æ”¯ï¼ˆç­‰äº`git fetch + git merge`ï¼Œå†²çªæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³ï¼‰ï¼š `git pull`

  - å¯ä»¥æŠŠå…¶ä»–è¿œç¨‹åº“çš„ä»£ç æ‹‰å–åˆ°å½“å‰åˆ†æ”¯ä¸Šé¢ï¼š`git pull origin master`

- å°†å•/å¤šä¸ª commit åº”ç”¨äºå½“å‰åˆ†æ”¯ï¼š`git cherry-pick 'commitHashA' 'commitHashB'`

æ¡ˆä¾‹ï¼š

- `master`åˆ†æ”¯ä¸å…è®¸ pushï¼Œå› æ­¤é€šè¿‡`master_wlx`åˆ†æ”¯`merge`è¿‡å»ï¼Œæ“ä½œæ­¥éª¤ï¼ˆåœ¨`master_wlx`åˆ†æ”¯ï¼‰ï¼šä¿®æ”¹ç‰ˆæœ¬å·ï¼ˆå‡è®¾ä»…éœ€è¦ä¿®æ”¹æŸä¸ªåŒ…çš„ç‰ˆæœ¬å·ï¼‰->`git push`->`git pull origin master`ï¼Œå‡ºç°`conflict`ï¼Œå¤„ç†å®Œä¹‹åå‘ç°æ–‡ä»¶æ²¡æœ‰æ”¹å˜ï¼Œä¸å…è®¸ pushã€‚åˆ†æåŸå› ï¼šç›¸å¯¹äº`master_wlx`åˆ†æ”¯ï¼Œå¤„ç†å®Œåˆ†æ­§åçš„æœ¬åœ°åˆ†æ”¯ç¡®å®å’Œè¿œç¨‹åˆ†æ”¯ä¸€è‡´ã€‚è§£å†³æ–¹æ¡ˆï¼šå…ˆ`pull`ï¼Œå†`push`ï¼Œå³`git pull origin master`->ä¿®æ”¹ç‰ˆæœ¬å·->`git push`

## commit ç›¸å…³

- æ·»åŠ æœ¬åœ°æ–‡ä»¶ï¼ˆå¤¹ï¼‰ä¿®æ”¹åˆ° stageï¼š `git add xxx`

  - æŸ¥çœ‹å½“å‰æ²¡æœ‰ add çš„å†…å®¹ï¼š`git diff`

  - æŸ¥çœ‹å·²ç» add ä½†æ˜¯æ²¡æœ‰ commit çš„å†…å®¹ï¼š`git diff --cache`

  - æŸ¥çœ‹å½“å‰æ²¡æœ‰ add æˆ–å·² add ä½†æœª commit çš„å†…å®¹ï¼š`git diff HEAD`

- æŠŠ stage ä¸­çš„ä¿®æ”¹æäº¤åˆ°æœ¬åœ°åº“ï¼š`git commit -m 'comments'`(-m: message)

- å°†å·²è¢« git è¿½è¸ªåˆ°çš„æ–‡ä»¶ä¸­çš„`ä¿®æ”¹`æˆ–`åˆ é™¤`æ“ä½œæäº¤åˆ°æœ¬åœ°åº“ï¼Œå³ä½¿æ²¡æœ‰ä½¿ç”¨ git add å°†æ”¹åŠ¨æäº¤åˆ° stageï¼Œæ³¨æ„`æ–°åŠ çš„æ–‡ä»¶`æ˜¯ä¸ä¼šè¢«æäº¤çš„ï¼Œä»éœ€å…ˆä½¿ç”¨ git add å°†å…¶æ·»åŠ åˆ° stageï¼š`git commit -a -m 'comments'`(-a: all)

- å°†æœ¬åœ°æœª push çš„ commit å†å²æ•´ç†æˆç›´çº¿ï¼š `git rebase`

  å¯å°†æœ¬æ¬¡ push ä¸­çš„ commit åˆå¹¶ï¼Œå¸¸è§æ¡ˆä¾‹ï¼š

  - commit-push æ—¶å‘ç°è¿œç¨‹å·²è¢«ä»–äººæ›´æ”¹ï¼Œæˆ‘ä»¬éœ€è¦ pull ä¹‹åå† commmit-pushï¼Œè¿™å°†å¯¼è‡´ git history ä¸­æˆ‘ä»¬è¿™æ¬¡æœ‰ 2 æ¬¡ commit
  - æœ¬åœ°å¤šæ¬¡ commit åå† pushï¼ŒåŒæ · git history ä¸­ä¼šæœ‰å¤šæ¬¡ commit

## push ç›¸å…³

- æŠŠæœ¬åœ°åº“çš„ä¿®æ”¹æäº¤åˆ°è¿œç¨‹åº“ä¸­ï¼š `git push`

## å›é€€ç›¸å…³

- ï¼ˆ`reset`ï¼‰å›é€€åˆ°ä¹‹å‰çš„ commit stateï¼ˆå¯å›é€€æœ¬åœ°æœª push çš„ commitï¼‰ åæäº¤ï¼Œä¼šæ’¤é”€é‚£æ¬¡ commit ä¹‹åçš„ commitï¼š`git reset --soft 'commitHash'`

  - å›é€€åˆ°ä¸Šæ¬¡ï¼ˆ1 ä¸ªç‰ˆæœ¬ï¼‰çš„ commit stateï¼š`git reset --soft HEAD~`ã€`git reset --soft HEAD~1`

  - å›é€€åˆ°ä¸Šä¸Šæ¬¡ï¼ˆ2 ä¸ªç‰ˆæœ¬ï¼‰çš„ commit stateï¼š`git reset --soft HEAD~2`...

  æ¡ˆä¾‹ï¼š

  - å›é€€ remote çš„ commitï¼Œå¸¸ç”¨äºå›é€€`è¾ƒæ–°`çš„ commit ï¼Œå›é€€åå†å°†ä¹‹åçš„ commit é‡æ–°æäº¤ä¸€éä»¥æ¢å¤ï¼ˆå…¶ä»–å·²æ‹‰å–è¯¥è¿œç¨‹åˆ†æ”¯ã€Œå¦‚`master`ã€è¢«æ’¤é”€ä»£ç çš„åˆ†æ”¯ä»ä¼šæœ‰é—®é¢˜ï¼Œåœ¨`merge`åˆ°`master`åˆ†æ”¯æ—¶éœ€è¦å¤„ç†åˆ†æ­§ï¼Œè¾ƒå¥½çš„è§£å†³æ–¹æ³•æ˜¯æ–°å»ºåˆ†æ”¯å°†æ’¤é”€çš„ä»£ç æ¢å¤å†é‡æ–°`merge`åˆ°`master`ï¼Œä¹‹åå†æ‹‰å–`master`ä¹‹åå³å¯æ›´æ–°ï¼Œä¸å¦‚ç›´æ¥æ–°å»ºåˆ†æ”¯å°†æ’¤é”€çš„ä»£ç æ¢å¤å†é‡æ–°`merge`åˆ°`master`è€Œä¸éœ€è¦`reset`ğŸ˜‚ï¼‰

- ï¼ˆ`revert`ï¼‰å›é€€ä¹‹å‰å·²æäº¤çš„ commit åæäº¤ï¼Œä¼šæ’¤é”€é‚£æ¬¡ commit çš„ä¿®æ”¹ï¼š`git revert 'commitHash'`

  - å›é€€ä¸Šæ¬¡æäº¤ï¼ˆ1 ä¸ªç‰ˆæœ¬ï¼‰çš„ commit stateï¼š`git revert HEAD~`ã€`git revert HEAD~1`

  - å›é€€ä¸Šä¸Šæ¬¡æäº¤çš„ï¼ˆ2 ä¸ªç‰ˆæœ¬ï¼‰ commit stateï¼š`git revert HEAD~2`...

  æ¡ˆä¾‹ï¼š

  - å›é€€ remote çš„ commitï¼Œå¸¸ç”¨äºå›é€€`è¾ƒè€`çš„ commit ï¼Œå›é€€åå°†ä¿®æ”¹åçš„è¿™æ¬¡ commit é‡æ–°æäº¤ä¸€æ¬¡ä»¥æ¢å¤

    - éœ€è¦æ³¨æ„ revert ä¹‹åï¼Œè¿™æ¬¡ commit æ¶‰åŠçš„æ–‡ä»¶çš„ä¿®æ”¹çŠ¶æ€å·²å‘ç”Ÿæ”¹å˜ï¼Œåç»­æäº¤æ—¶å¦‚æœæœªä¿®æ”¹è¿™äº›æ–‡ä»¶ï¼Œå°†æ— æ³•æ›´æ–°æˆåŠŸ

    - ä½¿ç”¨ revert å›é€€åï¼Œå†æ¬¡åˆå¹¶åæ— æ³•æ›´æ–°ï¼Œè‹¥å¸Œæœ›é‚£æ¬¡è¢« revert çš„ commit é‡æ–°è¢«æäº¤ï¼Œå¯å†æ¬¡ revert é‚£æ¬¡`revert commmit`ä»¥æ›´æ–°

## stash ç›¸å…³

- æŠŠæœªå®Œæˆçš„ä¿®æ”¹ç¼“å­˜åˆ°å †æ ˆä¸­ï¼š`git stash`

  - æŸ¥çœ‹æ‰€æœ‰çš„ç¼“å­˜ï¼š`git stash list`

  - æ¢å¤åˆ°æœ€è¿‘çš„ä¸€ä¸ªç¼“å­˜ï¼š`git stash apply`

  - æ¢å¤åˆ°æŒ‡å®šçš„ä¸€ä¸ªç¼“å­˜ï¼š`git stash apply 'stashName'`

    'stashName'ä¸º`stash@{0}`,`stash@{1}`...

  - åˆ é™¤ä¸€ä¸ªæŒ‡å®šçš„ç¼“å­˜ï¼š`git stash drop 'stashName'`

  - æ¢å¤åˆ°æœ€è¿‘çš„ä¸€ä¸ªç¼“å­˜å¹¶åˆ é™¤è¿™ä¸ªç¼“å­˜ï¼š`git stash pop`

  - åˆ é™¤æ‰€æœ‰ç¼“å­˜ï¼š`git stash clear`
